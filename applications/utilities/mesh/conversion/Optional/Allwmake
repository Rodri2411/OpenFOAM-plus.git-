#!/bin/sh
#------------------------------------------------------------------------------
cd ${0%/*} || exit 1    # Run from this directory

# Optional component: continue-on-error
# - may not have third-party installed
export WM_CONTINUE_ON_ERROR=true

# Parse arguments for compilation (at least for error catching)
. $WM_PROJECT_DIR/wmake/scripts/AllwmakeParseArguments

warning="==> skip ccmio"

if settings=$($WM_PROJECT_DIR/bin/foamEtcFile config.sh/ccmio)
then
    . $settings
else
    echo "$warning (no config.sh/ccmio settings)"
    exit
fi

# Build libccmio (.a|.so) - use static linkage for fewer issues
$WM_THIRD_PARTY_DIR/makeCCMIO lib

if [ -e $CCMIO_ARCH_PATH/include/libccmio/ccmio.h \
  -a \( -e $CCMIO_ARCH_PATH/lib/libccmio.a -o $FOAM_EXT_LIBBIN/libccmio.so \) ]
then
    wmake $targetType ccm26ToFoam
else
    echo $warning
fi

#------------------------------------------------------------------------------
